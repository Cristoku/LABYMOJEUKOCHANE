@model LibApp.Models.Customer

@{
    ViewBag.Title = "Customer Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Details for @Model.Name</h2>

<dl class="dl-horizontal">
    <dt>Name</dt>
    <dd>@Model.Name</dd>

    <dt>Membership Type</dt>
    <dd>@Model.MembershipType.Name</dd>
</dl>

@if (User.IsInRole("CanEditCustomer"))
{
    <a class="btn btn-primary" href="@Url.Action("Edit", "Customers", new { id = Model.Id })">Edit</a>
}

@Html.AntiForgeryToken()

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('commentForm').addEventListener('submit', function (e) {
                e.preventDefault();
                var comment = document.getElementById('commentInput').value;
                if (!comment) {
                    alert('Comment cannot be empty.');
                    return false;
                }
               
                axios.post('/api/comments', { comment: comment, customerId: '@Model.Id' })
                    .then(function (response) {
                        console.log(response);
                        
                    })
                    .catch(function (error) {
                        console.log(error);
                      
                    });
            });
        });
    </script>
}